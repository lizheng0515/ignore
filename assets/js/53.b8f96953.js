(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{383:function(e,r,n){"use strict";n.r(r);var a=n(2),s=Object(a.a)({},(function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("p",[n("strong",[e._v("ä¸ºäº†ä¿è¯çš„å¯è¯»æ€§ï¼Œæœ¬æ–‡é‡‡ç”¨æ„è¯‘è€Œéžç›´è¯‘ã€‚")])]),e._v(" "),n("h2",{attrs:{id:"proxy-ä»‹ç»"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#proxy-ä»‹ç»"}},[e._v("#")]),e._v(" Proxy ä»‹ç»")]),e._v(" "),n("p",[e._v("ä½¿ç”¨"),n("code",[e._v("Proxy")]),e._v("ï¼Œä½ å¯ä»¥å°†ä¸€åªçŒ«ä¼ªè£…æˆä¸€åªè€è™Žã€‚ä¸‹é¢å¤§çº¦æœ‰6ä¸ªä¾‹å­ï¼Œæˆ‘å¸Œæœ›å®ƒä»¬èƒ½è®©ä½ ç›¸ä¿¡ï¼ŒProxy æä¾›äº†å¼ºå¤§çš„ Javascript å…ƒç¼–ç¨‹ã€‚")]),e._v(" "),n("p",[e._v("å°½ç®¡å®ƒä¸åƒå…¶ä»–ES6åŠŸèƒ½ç”¨çš„æ™®éï¼Œä½†"),n("code",[e._v("Proxy")]),e._v("æœ‰è®¸å¤šç”¨é€”ï¼ŒåŒ…æ‹¬"),n("a",{attrs:{href:"https://hackernoon.com/introducing-javascript-es6-proxies-1327419ab413",target:"_blank",rel:"noopener noreferrer"}},[e._v("è¿ç®—ç¬¦é‡è½½"),n("OutboundLink")],1),e._v("ï¼Œ"),n("a",{attrs:{href:"https://en.wikipedia.org/wiki/Mock_object",target:"_blank",rel:"noopener noreferrer"}},[e._v("å¯¹è±¡æ¨¡æ‹Ÿ"),n("OutboundLink")],1),e._v("ï¼Œ"),n("a",{attrs:{href:"https://medium.com/dailyjs/how-to-use-javascript-proxies-for-fun-and-profit-365579d4a9f8",target:"_blank",rel:"noopener noreferrer"}},[e._v("ç®€æ´è€Œçµæ´»çš„APIåˆ›å»º"),n("OutboundLink")],1),e._v("ï¼Œ"),n("a",{attrs:{href:"https://github.com/sindresorhus/on-change",target:"_blank",rel:"noopener noreferrer"}},[e._v("å¯¹è±¡å˜åŒ–äº‹ä»¶"),n("OutboundLink")],1),e._v("ï¼Œç”šè‡³"),n("a",{attrs:{href:"https://medium.com/@gustojs/vuejs-3-and-other-top-news-from-q-a-event-with-core-vue-devs-c9834946ae7b",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue 3èƒŒåŽçš„å†…éƒ¨å“åº”ç³»ç»Ÿæä¾›åŠ¨åŠ›"),n("OutboundLink")],1),e._v("ã€‚")]),e._v(" "),n("p",[n("code",[e._v("Proxy")]),e._v("ç”¨äºŽä¿®æ”¹æŸäº›æ“ä½œçš„é»˜è®¤è¡Œä¸ºï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºåœ¨ç›®æ ‡å¯¹è±¡ä¹‹å‰æž¶è®¾ä¸€å±‚æ‹¦æˆªï¼Œå¤–éƒ¨æ‰€æœ‰çš„è®¿é—®éƒ½å¿…é¡»å…ˆé€šè¿‡è¿™å±‚æ‹¦æˆªï¼Œå› æ­¤æä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œå¯ä»¥å¯¹å¤–éƒ¨çš„è®¿é—®è¿›è¡Œè¿‡æ»¤å’Œä¿®æ”¹ã€‚è¿™ä¸ªè¯çš„åŽŸç†ä¸ºä»£ç†ï¼Œåœ¨è¿™é‡Œå¯ä»¥è¡¨ç¤ºç”±å®ƒæ¥â€œä»£ç†â€æŸäº›æ“ä½œï¼Œè¯‘ä¸ºâ€œä»£ç†å™¨â€ã€‚")]),e._v(" "),n("p",[e._v("ES6åŽŸç”Ÿæä¾›äº†"),n("code",[e._v("Proxy")]),e._v("æž„é€ å‡½æ•°ï¼Œç”¨æ¥ç”Ÿæˆ"),n("code",[e._v("Proxy")]),e._v("å®žä¾‹ã€‚")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("var proxy = new Proxy(target, handler);\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br")])]),n("p",[n("code",[e._v("Proxy")]),e._v("å¯¹è±¡çš„æ‰€æœ‰ç”¨æ³•ï¼Œéƒ½æ˜¯ä¸Šé¢çš„è¿™ç§å½¢å¼ã€‚ä¸åŒçš„åªæ˜¯"),n("code",[e._v("handle")]),e._v("å‚æ•°çš„å†™æ³•ã€‚å…¶ä¸­"),n("code",[e._v("new Proxy")]),e._v("ç”¨æ¥ç”Ÿæˆ"),n("code",[e._v("Proxy")]),e._v("å®žä¾‹ï¼Œ"),n("code",[e._v("target")]),e._v("æ˜¯è¡¨ç¤ºæ‰€è¦æ‹¦æˆªçš„å¯¹è±¡ï¼Œ"),n("code",[e._v("handle")]),e._v("æ˜¯ç”¨æ¥å®šåˆ¶æ‹¦æˆªè¡Œä¸ºçš„å¯¹è±¡ã€‚")]),e._v(" "),n("p",[e._v("ä¸‹é¢æ˜¯ Proxy æœ€ç®€å•çš„ä¾‹å­æ˜¯ï¼Œè¿™æ˜¯ä¸€ä¸ªæœ‰é™·é˜±çš„ä»£ç†ï¼Œä¸€ä¸ª"),n("code",[e._v("get")]),e._v("é™·é˜±ï¼Œæ€»æ˜¯è¿”å›ž"),n("code",[e._v("42")]),e._v("ã€‚")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("let target = {\n  x: 10,\n  y: 20\n}\n\nlet hanler = {\n  get: (obj, prop) => 42\n}\n\ntarget = new Proxy(target, hanler)\n\ntarget.x //42\ntarget.y //42\ntarget.x // 42\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br"),n("span",{staticClass:"line-number"},[e._v("13")]),n("br"),n("span",{staticClass:"line-number"},[e._v("14")]),n("br")])]),n("p",[e._v("ç»“æžœæ˜¯ä¸€ä¸ªå¯¹è±¡å°†ä¸ºä»»ä½•å±žæ€§è®¿é—®æ“ä½œéƒ½è¿”å›žâ€œ42â€ã€‚ è¿™åŒ…æ‹¬"),n("code",[e._v("target.x")]),e._v("ï¼Œ"),n("code",[e._v("target['x']")]),e._v("ï¼Œ"),n("code",[e._v("Reflect.get(target, 'x')")]),e._v("ç­‰ã€‚")]),e._v(" "),n("p",[e._v("ä½†æ˜¯ï¼ŒProxy é™·é˜±å½“ç„¶ä¸é™äºŽå±žæ€§çš„è¯»å–ã€‚ å®ƒåªæ˜¯åå‡ ä¸ªä¸åŒé™·é˜±ä¸­çš„ä¸€ä¸ªï¼š")]),e._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/get",target:"_blank",rel:"noopener noreferrer"}},[e._v("handler.get"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/set",target:"_blank",rel:"noopener noreferrer"}},[e._v("handler.set"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/has",target:"_blank",rel:"noopener noreferrer"}},[e._v("handler.has"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/apply",target:"_blank",rel:"noopener noreferrer"}},[e._v("handler.apply"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/construct",target:"_blank",rel:"noopener noreferrer"}},[e._v("handler.construct"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/ownKeys",target:"_blank",rel:"noopener noreferrer"}},[e._v("handler.ownKeys"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/deleteProperty",target:"_blank",rel:"noopener noreferrer"}},[e._v("handler.deleteProperty"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/defineProperty",target:"_blank",rel:"noopener noreferrer"}},[e._v("handler.defineProperty"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/isExtensible",target:"_blank",rel:"noopener noreferrer"}},[e._v("handler.isExtensible"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/preventExtensions",target:"_blank",rel:"noopener noreferrer"}},[e._v("handler.preventExtensions"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/getPrototypeOf",target:"_blank",rel:"noopener noreferrer"}},[e._v("handler.getPrototypeOf"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/setPrototypeOf",target:"_blank",rel:"noopener noreferrer"}},[e._v("handler.setPrototypeOf"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/getOwnPropertyDescriptor",target:"_blank",rel:"noopener noreferrer"}},[e._v("handler.getOwnPropertyDescriptor"),n("OutboundLink")],1)])]),e._v(" "),n("h2",{attrs:{id:"proxy-ç”¨ä¾‹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#proxy-ç”¨ä¾‹"}},[e._v("#")]),e._v(" Proxy ç”¨ä¾‹")]),e._v(" "),n("p",[n("img",{attrs:{src:"https://segmentfault.com/img/bVbuRz3?w=697&h=344",alt:"clipboard.png"}})]),e._v(" "),n("h4",{attrs:{id:"é»˜è®¤å€¼-â€œé›¶å€¼â€"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#é»˜è®¤å€¼-â€œé›¶å€¼â€"}},[e._v("#")]),e._v(" "),n("strong",[e._v("é»˜è®¤å€¼/â€œé›¶å€¼â€")])]),e._v(" "),n("p",[e._v("åœ¨ Go è¯­è¨€ä¸­ï¼Œæœ‰"),n("a",{attrs:{href:"https://tour.golang.org/basics/12",target:"_blank",rel:"noopener noreferrer"}},[e._v("é›¶å€¼"),n("OutboundLink")],1),e._v("çš„æ¦‚å¿µï¼Œé›¶å€¼æ˜¯ç‰¹å®šäºŽç±»åž‹çš„éšå¼é»˜è®¤ç»“æž„å€¼ã€‚å…¶æ€æƒ³æ˜¯æä¾›ç±»åž‹å®‰å…¨çš„é»˜è®¤åŸºå…ƒå€¼ï¼Œæˆ–è€…ç”¨gopherçš„è¯è¯´ï¼Œç»™ç»“æž„ä¸€ä¸ªæœ‰ç”¨çš„é›¶å€¼ã€‚")]),e._v(" "),n("p",[e._v("è™½ç„¶ä¸åŒçš„åˆ›å»ºæ¨¡å¼æ”¯æŒç±»ä¼¼çš„åŠŸèƒ½ï¼Œä½†Javascriptæ— æ³•ç”¨éšå¼åˆå§‹å€¼åŒ…è£…å¯¹è±¡ã€‚Javascriptä¸­æœªè®¾ç½®å±žæ€§çš„é»˜è®¤å€¼æ˜¯"),n("code",[e._v("undefined")]),e._v("ã€‚ä½† Proxy å¯ä»¥æ”¹å˜è¿™ç§æƒ…å†µã€‚")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("const withZeroValue = (target, zeroValue) => new Proxy(target, {\n  get: (obj, prop) => (prop in obj) ? obj[prop] : zeroValue\n})\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br")])]),n("p",[e._v("å‡½æ•°"),n("code",[e._v("withZeroValue")]),e._v(" ç”¨æ¥åŒ…è£…ç›®æ ‡å¯¹è±¡ã€‚ å¦‚æžœè®¾ç½®äº†å±žæ€§ï¼Œåˆ™è¿”å›žå±žæ€§å€¼ã€‚ å¦åˆ™ï¼Œå®ƒè¿”å›žä¸€ä¸ªé»˜è®¤çš„**â€œé›¶å€¼â€**ã€‚")]),e._v(" "),n("p",[e._v("ä»ŽæŠ€æœ¯ä¸Šè®²ï¼Œè¿™ç§æ–¹æ³•ä¹Ÿä¸æ˜¯éšå«çš„ï¼Œä½†å¦‚æžœæˆ‘ä»¬æ‰©å±•"),n("code",[e._v("withZeroValue")]),e._v("ï¼Œä»¥Boolean ("),n("code",[e._v("false")]),e._v("), Number ("),n("code",[e._v("0")]),e._v("), String ("),n("code",[e._v('""')]),e._v("), Object ("),n("code",[e._v("{}")]),e._v(")ï¼ŒArray ("),n("code",[e._v("[]")]),e._v(")ç­‰å¯¹åº”çš„é›¶å€¼ï¼Œåˆ™å¯èƒ½æ˜¯éšå«çš„ã€‚")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("let pos = {\n  x: 4,\n  y: 19\n}\n\nconsole.log(pos.x, pos.y, pos.z) // 4, 19, undefined\n\npos = withZeroValue(pos, 0)\n\nconsole.log(pos.z, pos.y, pos.z) // 4, 19, 0\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br")])]),n("p",[e._v("æ­¤åŠŸèƒ½å¯èƒ½æœ‰ç”¨çš„ä¸€ä¸ªåœ°æ–¹æ˜¯åæ ‡ç³»ã€‚ ç»˜å›¾åº“å¯ä»¥åŸºäºŽæ•°æ®çš„å½¢çŠ¶è‡ªåŠ¨æ”¯æŒ2Då’Œ3Dæ¸²æŸ“ã€‚ ä¸æ˜¯åˆ›å»ºä¸¤ä¸ªå•ç‹¬çš„æ¨¡åž‹ï¼Œè€Œæ˜¯å§‹ç»ˆå°†"),n("code",[e._v("z")]),e._v("é»˜è®¤ä¸º "),n("code",[e._v("0")]),e._v(" è€Œä¸æ˜¯"),n("code",[e._v("undefined")]),e._v("ï¼Œè¿™å¯èƒ½æ˜¯æœ‰æ„ä¹‰çš„ã€‚")]),e._v(" "),n("h2",{attrs:{id:"è´Ÿç´¢å¼•æ•°ç»„"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è´Ÿç´¢å¼•æ•°ç»„"}},[e._v("#")]),e._v(" è´Ÿç´¢å¼•æ•°ç»„")]),e._v(" "),n("p",[e._v("åœ¨JSä¸­èŽ·å–æ•°ç»„ä¸­çš„æœ€åŽä¸€ä¸ªå…ƒç´ æ–¹å¼é€šè¿‡å†™çš„å¾ˆå†—é•¿ä¸”é‡å¤ï¼Œä¹Ÿå®¹æ˜“å‡ºé”™ã€‚ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæœ‰ä¸€ä¸ªTC39ææ¡ˆå®šä¹‰äº†ä¸€ä¸ªä¾¿åˆ©å±žæ€§"),n("code",[e._v("Array.lastItem")]),e._v("æ¥èŽ·å–å’Œè®¾ç½®æœ€åŽä¸€ä¸ªå…ƒç´ ã€‚")]),e._v(" "),n("p",[e._v("å…¶ä»–è¯­è¨€ï¼Œå¦‚Pythonå’ŒRubyï¼Œä½¿ç”¨è´Ÿç»„ç´¢å¼•æ›´å®¹æ˜“è®¿é—®æœ€åŽé¢çš„å…ƒç´ ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ç®€å•åœ°ä½¿ç”¨"),n("code",[e._v("arr[-1]")]),e._v("æ›¿ä»£"),n("code",[e._v("arr[arr.length-1]")]),e._v("è®¿é—®æœ€åŽä¸€ä¸ªå…ƒç´ ã€‚")]),e._v(" "),n("p",[e._v("ä½¿ç”¨ Proxy ä¹Ÿå¯ä»¥åœ¨ Javascript ä¸­ä½¿ç”¨è´Ÿç´¢å¼•ã€‚")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("const negativeArray = (els) => new Proxy(els, {\n  get: (target, propKey, receiver) => Reflect.get(target,\n    (+propKey < 0) ? String(target.length + +propKey) : propKey, receiver)\n});\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br")])]),n("p",[e._v("ä¸€ä¸ªé‡è¦çš„æ³¨æ„äº‹é¡¹æ˜¯åŒ…å«"),n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/get",target:"_blank",rel:"noopener noreferrer"}},[e._v("handler.get"),n("OutboundLink")],1),e._v("çš„é™·é˜±å­—ç¬¦ä¸²åŒ–æ‰€æœ‰å±žæ€§ã€‚ å¯¹äºŽæ•°ç»„è®¿é—®ï¼Œæˆ‘ä»¬éœ€è¦å°†å±žæ€§åç§°å¼ºåˆ¶è½¬æ¢ä¸º"),n("code",[e._v("Numbers")]),e._v("ï¼Œè¿™æ ·å°±å¯ä»¥ä½¿ç”¨ä¸€å…ƒåŠ è¿ç®—ç¬¦ç®€æ´åœ°å®Œæˆã€‚")]),e._v(" "),n("p",[e._v("çŽ°åœ¨"),n("code",[e._v("[-1]")]),e._v("è®¿é—®æœ€åŽä¸€ä¸ªå…ƒç´ ï¼Œ"),n("code",[e._v("[-2]")]),e._v("è®¿é—®å€’æ•°ç¬¬äºŒä¸ªå…ƒç´ ï¼Œä»¥æ­¤ç±»æŽ¨ã€‚")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("const unicorn = negativeArray(['ðŸ´', 'ðŸŽ‚', 'ðŸŒˆ']);\n\nunicorn[-1] // 'ðŸŒˆ'\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br")])]),n("h2",{attrs:{id:"éšè—å±žæ€§"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#éšè—å±žæ€§"}},[e._v("#")]),e._v(" éšè—å±žæ€§")]),e._v(" "),n("p",[e._v("ä¼—æ‰€å‘¨çŸ¥ JS æ²¡æœ‰ç§æœ‰å±žæ€§ã€‚ "),n("code",[e._v("Symbol")]),e._v("æœ€åˆæ˜¯ä¸ºäº†"),n("a",{attrs:{href:"https://codeburst.io/a-practical-guide-to-es6-symbol-3fc90117c7ac",target:"_blank",rel:"noopener noreferrer"}},[e._v("å¯ç”¨ç§æœ‰å±žæ€§è€Œå¼•å…¥çš„"),n("OutboundLink")],1),e._v("ï¼Œä½†åŽæ¥ä½¿ç”¨åƒ"),n("code",[e._v("Object.getOwnPropertySymbols")]),e._v("è¿™æ ·çš„åå°„æ–¹æ³•è¿›è¡Œäº†æ·¡åŒ–ï¼Œè¿™ä½¿å¾—å®ƒä»¬å¯ä»¥è¢«å…¬å¼€å‘çŽ°ã€‚")]),e._v(" "),n("p",[e._v("é•¿æœŸä»¥æ¥çš„æƒ¯ä¾‹æ˜¯å°†ç§æœ‰å±žæ€§å‘½åä¸ºå‰ä¸‹åˆ’çº¿"),n("code",[e._v("_")]),e._v("ï¼Œæœ‰æ•ˆåœ°æ ‡è®°å®ƒä»¬â€œä¸è¦è®¿é—®â€ã€‚"),n("code",[e._v("Prox")]),e._v(" æä¾›äº†ä¸€ç§ç¨å¾®æ›´å¥½çš„æ–¹æ³•æ¥å±è”½è¿™äº›å±žæ€§ã€‚")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("const hide = (target, prefix = '_') => new Proxy(target, {\n  has: (obj, prop) => (!prop.startsWith(prefix) && prop in obj),\n  ownKeys: (obj) => Reflect.ownKeys(obj)\n    .filter(prop => (typeof prop !== \"string\" || !prop.startsWith(prefix))),\n  get: (obj, prop, rec) => (prop in rec) ? obj[prop] : undefined\n})\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br")])]),n("p",[n("code",[e._v("hide")]),e._v("å‡½æ•°åŒ…è£…ç›®æ ‡å¯¹è±¡ï¼Œå¹¶ä½¿å¾—ä»Ž"),n("code",[e._v("in")]),e._v("è¿ç®—ç¬¦å’Œ"),n("code",[e._v("Object.getOwnPropertyNames")]),e._v("ç­‰æ–¹æ³•æ— æ³•è®¿é—®å¸¦æœ‰ä¸‹åˆ’çº¿çš„å±žæ€§ã€‚")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("let userData = hide({\n  firstName: 'Tom',\n  mediumHandle: '@tbarrasso',\n  _favoriteRapper: 'Drake'\n})\n\nuserData._favoriteRapper        // undefined\n('_favoriteRapper' in userData) // false\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br")])]),n("p",[e._v("æ›´å®Œæ•´çš„å®žçŽ°è¿˜åŒ…æ‹¬è¯¸å¦‚"),n("code",[e._v("deleteProperty")]),e._v("å’Œ"),n("code",[e._v("defineProperty")]),e._v("ä¹‹ç±»çš„é™·é˜±ã€‚ é™¤äº†é—­åŒ…ä¹‹å¤–ï¼Œè¿™å¯èƒ½æ˜¯æœ€æŽ¥è¿‘çœŸæ­£ç§æœ‰å±žæ€§çš„æ–¹æ³•ï¼Œå› ä¸ºå®ƒä»¬æ— æ³•é€šè¿‡æžšä¸¾ï¼Œå…‹éš†ï¼Œè®¿é—®æˆ–ä¿®æ”¹æ¥è®¿é—®ã€‚")]),e._v(" "),n("p",[n("img",{attrs:{src:"https://segmentfault.com/img/bVbuSTv?w=975&h=62",alt:"clipboard.png"}})]),e._v(" "),n("p",[e._v("ä½†æ˜¯ï¼Œå®ƒä»¬åœ¨å¼€å‘æŽ§åˆ¶å°ä¸­å¯è§ã€‚ åªæœ‰é—­åŒ…æ‰èƒ½å…äºŽè¿™ç§å‘½è¿ã€‚")]),e._v(" "),n("h2",{attrs:{id:"ç¼“å­˜"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç¼“å­˜"}},[e._v("#")]),e._v(" ç¼“å­˜")]),e._v(" "),n("p",[e._v("åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´åŒæ­¥çŠ¶æ€æ—¶é‡åˆ°å›°éš¾å¹¶ä¸ç½•è§ã€‚æ•°æ®å¯èƒ½ä¼šéšç€æ—¶é—´çš„æŽ¨ç§»è€Œå‘ç”Ÿå˜åŒ–ï¼Œå¾ˆéš¾ç¡®åˆ‡åœ°çŸ¥é“ä½•æ—¶é‡æ–°åŒæ­¥çš„é€»è¾‘ã€‚")]),e._v(" "),n("p",[n("code",[e._v("Proxy")]),e._v("å¯ç”¨äº†ä¸€ç§æ–°æ–¹æ³•ï¼šæ ¹æ®éœ€è¦å°†å¯¹è±¡åŒ…è£…ä¸ºæ— æ•ˆï¼ˆå’Œé‡æ–°åŒæ­¥ï¼‰å±žæ€§ã€‚ æ‰€æœ‰è®¿é—®å±žæ€§çš„å°è¯•éƒ½é¦–å…ˆæ£€æŸ¥ç¼“å­˜ç­–ç•¥ï¼Œè¯¥ç­–ç•¥å†³å®šè¿”å›žå½“å‰åœ¨å†…å­˜ä¸­çš„å†…å®¹è¿˜æ˜¯é‡‡å–å…¶ä»–ä¸€äº›æ“ä½œã€‚")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("const ephemeral = (target, ttl = 60) => {\n  const CREATED_AT = Date.now()\n  const isExpired = () => (Date.now() - CREATED_AT) > (ttl * 1000)\n  \n  return new Proxy(target, {\n    get: (obj, prop) => isExpired() ? undefined : Reflect.get(obj, prop)\n  })\n}\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br")])]),n("p",[e._v("è¿™ä¸ªå‡½æ•°è¿‡äºŽç®€åŒ–äº†:å®ƒä½¿å¯¹è±¡ä¸Šçš„æ‰€æœ‰å±žæ€§åœ¨ä¸€æ®µæ—¶é—´åŽéƒ½æ— æ³•è®¿é—®ã€‚ç„¶è€Œï¼Œå°†æ­¤æ–¹æ³•æ‰©å±•ä¸ºæ ¹æ®æ¯ä¸ªå±žæ€§è®¾ç½®ç”Ÿå­˜æ—¶é—´(TTL)ï¼Œå¹¶åœ¨ä¸€å®šçš„æŒç»­æ—¶é—´æˆ–è®¿é—®æ¬¡æ•°ä¹‹åŽæ›´æ–°å®ƒå¹¶ä¸å›°éš¾ã€‚")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("let bankAccount = ephemeral({\n  balance: 14.93\n}, 10)\n\nconsole.log(bankAccount.balance)    // 14.93\n\nsetTimeout(() => {\n  console.log(bankAccount.balance)  // undefined\n}, 10 * 1000)\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br")])]),n("p",[e._v("è¿™ä¸ªç¤ºä¾‹ç®€å•åœ°ä½¿é“¶è¡Œå¸æˆ·ä½™é¢åœ¨10ç§’åŽæ— æ³•è®¿é—®ã€‚")]),e._v(" "),n("h2",{attrs:{id:"æžšä¸¾å’Œåªè¯»è§†å›¾"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æžšä¸¾å’Œåªè¯»è§†å›¾"}},[e._v("#")]),e._v(" æžšä¸¾å’Œåªè¯»è§†å›¾")]),e._v(" "),n("p",[e._v("è¿™äº›ä¾‹å­æ¥è‡ª"),n("code",[e._v("Csaba Hellinge å…³äºŽ[ä»£ç†ç”¨ä¾‹][23]å’Œ[Mozillaé»‘å®¢][24]çš„æ–‡ç« ã€‚æ–¹æ³•æ˜¯åŒ…è£…ä¸€ä¸ªå¯¹è±¡ä»¥é˜²æ­¢æ‰©å±•æˆ–ä¿®æ”¹ã€‚è™½ç„¶")]),e._v("object.freeze`çŽ°åœ¨æä¾›äº†å°†å¯¹è±¡æ¸²æŸ“ä¸ºåªè¯»çš„åŠŸèƒ½ï¼Œä½†æ˜¯å¯ä»¥å¯¹è¿™ç§æ–¹æ³•è¿›è¡Œæ‰©å±•ï¼Œä»¥ä¾¿è®¿é—®ä¸å­˜åœ¨å±žæ€§çš„æžšä¸¾å¯¹è±¡èƒ½æ›´å¥½åœ°å¤„ç†æŠ›å‡ºé”™è¯¯ã€‚")]),e._v(" "),n("h4",{attrs:{id:"åªè¯»è§†å›¾"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#åªè¯»è§†å›¾"}},[e._v("#")]),e._v(" "),n("strong",[e._v("åªè¯»è§†å›¾")])]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('const NOPE = () => {\n  throw new Error("Can\'t modify read-only view");\n}\n\nconst NOPE_HANDLER = {\n  set: NOPE,\n  defineProperty: NOPE,\n  deleteProperty: NOPE,\n  preventExtensions: NOPE,\n  setPrototypeOf: NOPE\n}\n\nconst readOnlyView = target =>\n  new Proxy(target, NOPE_HANDLER)\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br"),n("span",{staticClass:"line-number"},[e._v("13")]),n("br"),n("span",{staticClass:"line-number"},[e._v("14")]),n("br")])]),n("h4",{attrs:{id:"æžšä¸¾è§†å›¾"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æžšä¸¾è§†å›¾"}},[e._v("#")]),e._v(" "),n("strong",[e._v("æžšä¸¾è§†å›¾")])]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('const createEnum = (target) => readOnlyView(new Proxy(target, {\n  get: (obj, prop) => {\n    if (prop in obj) {\n      return Reflect.get(obj, prop)\n    }\n    throw new ReferenceError(`Unknown prop "${prop}"`)\n  }\n}))\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br")])]),n("p",[e._v("çŽ°åœ¨æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ª"),n("code",[e._v("Object")]),e._v("ï¼Œå¦‚æžœå°è¯•è®¿é—®ä¸å­˜åœ¨çš„å±žæ€§çŽ°åœ¨ä¸æ˜¯è¿”å›ž"),n("code",[e._v("undefined")]),e._v("ï¼Œè€Œæ˜¯ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚ è¿™ä½¿å¾—åœ¨æ—©æœŸæ•èŽ·å’Œè§£å†³é—®é¢˜å˜å¾—æ›´åŠ å®¹æ˜“ã€‚")]),e._v(" "),n("p",[e._v("æˆ‘ä»¬çš„"),n("code",[e._v("enum")]),e._v("ç¤ºä¾‹ä¹Ÿæ˜¯ä»£ç†ä¸Šçš„ä»£ç†çš„ç¬¬ä¸€ä¸ªç¤ºä¾‹ï¼Œå®ƒç¡®è®¤ä»£ç†æ˜¯å¦ä¸€ä¸ªä»£ç†çš„æœ‰æ•ˆç›®æ ‡å¯¹è±¡ã€‚è¿™é€šè¿‡ç»„åˆä»£ç†åŠŸèƒ½ä¿ƒè¿›äº†ä»£ç é‡ç”¨ã€‚")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('let SHIRT_SIZES = createEnum({\n  S: 10,\n  M: 15,\n  L: 20\n})\n\nSHIRT_SIZES.S // 10\nSHIRT_SIZES.S = 15\n\n// Uncaught Error: Can\'t modify read-only view\n\nSHIRT_SIZES.XL\n\n// Uncaught ReferenceError: Unknown prop "XL"\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br"),n("span",{staticClass:"line-number"},[e._v("13")]),n("br"),n("span",{staticClass:"line-number"},[e._v("14")]),n("br")])]),n("p",[e._v("è¿™ç§æ–¹æ³•å¯ä»¥è¿›ä¸€æ­¥æ‰©å±•ï¼ŒåŒ…æ‹¬æ¨¡æ‹Ÿæ–¹æ³•"),n("code",[e._v("nameOf")]),e._v("ï¼Œå®ƒè¿”å›žç»™å®š"),n("code",[e._v("enum")]),e._v("å€¼çš„å±žæ€§åï¼Œæ¨¡ä»¿Javascriptç­‰è¯­è¨€ä¸­çš„è¡Œä¸ºã€‚")]),e._v(" "),n("p",[e._v("è™½ç„¶å…¶ä»–æ¡†æž¶å’Œè¯­è¨€è¶…é›†(æ¯”å¦‚TypeScript)æä¾›"),n("code",[e._v("enum")]),e._v("ç±»åž‹ï¼Œä½†æ˜¯è¿™ä¸ªè§£å†³æ–¹æ¡ˆçš„ç‹¬ç‰¹ä¹‹å¤„åœ¨äºŽï¼Œå®ƒä½¿ç”¨æ™®é€šJavascriptï¼Œè€Œä¸ä½¿ç”¨ç‰¹æ®Šçš„æž„å»ºå·¥å…·æˆ–è½¬ç½®å™¨ã€‚")]),e._v(" "),n("h2",{attrs:{id:"è¿ç®—ç¬¦é‡è½½"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è¿ç®—ç¬¦é‡è½½"}},[e._v("#")]),e._v(" è¿ç®—ç¬¦é‡è½½")]),e._v(" "),n("p",[e._v("ä¹Ÿè®¸ä»Žè¯­æ³•ä¸Šè®²ï¼Œæœ€å¸å¼•äººçš„ "),n("code",[e._v("Proxy")]),e._v(" ç”¨ä¾‹æ˜¯é‡è½½æ“ä½œç¬¦çš„èƒ½åŠ›ï¼Œæ¯”å¦‚ä½¿ç”¨"),n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/has",target:"_blank",rel:"noopener noreferrer"}},[e._v("handler.has"),n("OutboundLink")],1),e._v("çš„"),n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/in",target:"_blank",rel:"noopener noreferrer"}},[e._v("in"),n("OutboundLink")],1),e._v("æ“ä½œç¬¦ã€‚")]),e._v(" "),n("p",[n("code",[e._v("in")]),e._v("æ“ä½œç¬¦ç”¨äºŽæ£€æŸ¥æŒ‡å®šçš„å±žæ€§æ˜¯å¦ä½äºŽæŒ‡å®šçš„å¯¹è±¡æˆ–å…¶åŽŸåž‹é“¾ä¸­ã€‚ä½†å®ƒä¹Ÿæ˜¯è¯­æ³•ä¸Šæœ€ä¼˜é›…çš„é‡è½½æ“ä½œç¬¦ã€‚è¿™ä¸ªä¾‹å­å®šä¹‰äº†ä¸€ä¸ªè¿žç»­"),n("code",[e._v("range")]),e._v("å‡½æ•°æ¥æ¯”è¾ƒæ•°å­—ã€‚")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("const range = (min, max) => new Proxy(Object.create(null), {\n  has: (_, prop) => (+prop >= min && +prop <= max)\n})\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br")])]),n("p",[e._v("ä¸ŽPythonä¸åŒï¼ŒPythonä½¿ç”¨ç”Ÿæˆå™¨ä¸Žæœ‰é™çš„æ•´æ•°åºåˆ—è¿›è¡Œæ¯”è¾ƒï¼Œè¿™ç§æ–¹æ³•æ”¯æŒåè¿›åˆ¶æ¯”è¾ƒï¼Œå¯ä»¥æ‰©å±•ä¸ºæ”¯æŒå…¶ä»–æ•°å€¼èŒƒå›´ã€‚")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("const X = 10.5\nconst nums = [1, 5, X, 50, 100]\n\nif (X in range(1, 100)) { // true\n  // ...\n}\n\nnums.filter(n => n in range(1, 10)) // [1, 5]\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br")])]),n("p",[e._v("å°½ç®¡è¿™ä¸ªç”¨ä¾‹ä¸èƒ½è§£å†³å¤æ‚çš„é—®é¢˜ï¼Œä½†å®ƒç¡®å®žæä¾›äº†å¹²å‡€ã€å¯è¯»å’Œå¯é‡ç”¨çš„ä»£ç ã€‚")]),e._v(" "),n("p",[e._v("é™¤äº†"),n("code",[e._v("in")]),e._v("è¿ç®—ç¬¦ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é‡è½½"),n("code",[e._v("delete")]),e._v("å’Œ"),n("code",[e._v("new")]),e._v("ã€‚")]),e._v(" "),n("h2",{attrs:{id:"cookieå¯¹è±¡"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#cookieå¯¹è±¡"}},[e._v("#")]),e._v(" cookieå¯¹è±¡")]),e._v(" "),n("p",[e._v("å¦‚æžœä½ æ›¾ç»ä¸Ž"),n("code",[e._v("cookie")]),e._v("è¿›è¡Œäº¤äº’ï¼Œé‚£ä¹ˆå¿…é¡»å¤„ç†"),n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie",target:"_blank",rel:"noopener noreferrer"}},[e._v("document.cookie"),n("OutboundLink")],1),e._v("ã€‚ è¿™æ˜¯ä¸€ä¸ªä¸å¯»å¸¸çš„APIï¼Œå› ä¸ºAPIæ˜¯ä¸€ä¸ª"),n("code",[e._v("String")]),e._v("ï¼Œå®ƒè¯»å‡ºæ‰€æœ‰"),n("code",[e._v("cookie")]),e._v("ï¼Œä»¥"),n("strong",[e._v("åˆ†å·åˆ†éš”")]),e._v("ã€‚")]),e._v(" "),n("p",[n("code",[e._v("document.cookie")]),e._v("æ˜¯ä¸€ä¸ªçœ‹èµ·æ¥åƒè¿™æ ·çš„å­—ç¬¦ä¸²ï¼š")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("_octo=GH1.2.2591.47507; _ga=GA1.1.62208.4087; has_recent_activity=1\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br")])]),n("p",[e._v("ç®€è€Œè¨€ä¹‹ï¼Œå¤„ç†"),n("code",[e._v("document.cookie")]),e._v("æ¯”è¾ƒéº»çƒ¦ä¸”å®¹æ˜“å‡ºé”™ã€‚ ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨"),n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie/Simple_document.cookie_framework",target:"_blank",rel:"noopener noreferrer"}},[e._v("ç®€å•çš„cookieæ¡†æž¶"),n("OutboundLink")],1),e._v("ï¼Œå¯ä»¥é€‚ç”¨äºŽä½¿ç”¨ Proxyã€‚")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("const getCookieObject = () => {\n    const cookies = document.cookie.split(';').reduce((cks, ck) => \n    ({[ck.substr(0, ck.indexOf('=')).trim()]: ck.substr(ck.indexOf('=') + 1), ...cks}), {});\n    const setCookie = (name, val) => document.cookie = `${name}=${val}`;\n    const deleteCookie = (name) => document.cookie = `${name}=; expires=Thu, 01 Jan 1970 00:00:01 GMT;`;\n\n    return new Proxy(cookies, {\n    set: (obj, prop, val) => (setCookie(prop, val), Reflect.set(obj, prop, val)),\n        deleteProperty: (obj, prop) => (deleteCookie(prop), Reflect.deleteProperty(obj, prop))\n     })\n}\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br")])]),n("p",[e._v("æ­¤å‡½æ•°è¿”å›žä¸€ä¸ªé”®å€¼å¯¹å¯¹è±¡ï¼Œä½†ä»£ç†å¯¹"),n("code",[e._v("document.cookie")]),e._v("è¿›è¡ŒæŒä¹…æ€§çš„æ‰€æœ‰æ›´æ”¹ã€‚")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('let docCookies = getCookieObject()\n\ndocCookies.has_recent_activity              // "1"\ndocCookies.has_recent_activity = "2"        // "2"\ndelete docCookies2["has_recent_activity"]   // true\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br")])]),n("p",[e._v("åœ¨11è¡Œä»£ç ä¸­ï¼Œä¿®æ”¹"),n("code",[e._v("cookie")]),e._v("æä¾›äº†æ›´å¥½çš„äº¤äº’ï¼Œå°½ç®¡åœ¨ç”Ÿäº§çŽ¯å¢ƒä¸­è¿˜éœ€è¦è¯¸å¦‚å­—ç¬¦ä¸²è§„èŒƒåŒ–ä¹‹ç±»çš„é™„åŠ åŠŸèƒ½ã€‚")]),e._v(" "),n("p",[e._v("ç»†èŠ‚å†³å®šæˆè´¥ï¼ŒProxy ä¹Ÿä¸ä¾‹å¤–ã€‚")]),e._v(" "),n("h2",{attrs:{id:"polyfill"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#polyfill"}},[e._v("#")]),e._v(" Polyfill")]),e._v(" "),n("p",[e._v("åœ¨æ’°å†™æœ¬æ–‡æ—¶(2019å¹´5æœˆ)ï¼ŒProxy æ²¡æœ‰"),n("strong",[e._v("å®Œæ•´çš„ polyfill")]),e._v("ã€‚ç„¶è€Œï¼Œæœ‰ä¸€ä¸ªç”±è°·æ­Œç¼–å†™çš„ "),n("a",{attrs:{href:"https://github.com/GoogleChrome/proxy-polyfill",target:"_blank",rel:"noopener noreferrer"}},[e._v("partial polyfill for Proxy"),n("OutboundLink")],1),e._v(" ï¼Œå®ƒæ”¯æŒ"),n("code",[e._v("get")]),e._v("ã€"),n("code",[e._v("set")]),e._v("ã€"),n("code",[e._v("apply")]),e._v("å’Œ"),n("code",[e._v("construct trap")]),e._v("ï¼Œå¹¶é€‚ç”¨äºŽIE9+ã€‚")]),e._v(" "),n("h4",{attrs:{id:"å®ƒæ˜¯-proxy-å—ï¼Ÿ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å®ƒæ˜¯-proxy-å—ï¼Ÿ"}},[e._v("#")]),e._v(" å®ƒæ˜¯ Proxy å—ï¼Ÿ")]),e._v(" "),n("blockquote",[n("p",[e._v("ç¡®å®šä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ä»£ç†æ˜¯ä¸å¯èƒ½çš„")])]),e._v(" "),n("p",[e._v("æ ¹æ®Javascriptè¯­è¨€è§„èŒƒï¼Œæ— æ³•ç¡®å®šå¯¹è±¡æ˜¯å¦æ˜¯ä»£ç†ã€‚ ä½†æ˜¯ï¼Œåœ¨ Node 10+ä¸Šï¼Œå¯ä»¥ä½¿ç”¨"),n("a",{attrs:{href:"https://nodejs.org/api/util.html#util_util_types_isproxy_value",target:"_blank",rel:"noopener noreferrer"}},[e._v("util.types.isProxy"),n("OutboundLink")],1),e._v("æ–¹æ³•ã€‚")]),e._v(" "),n("h4",{attrs:{id:"ç›®æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç›®æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ"}},[e._v("#")]),e._v(" ç›®æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ")]),e._v(" "),n("p",[e._v("ç»™å®šä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œå°±ä¸å¯èƒ½èŽ·å¾—æˆ–æ›´æ”¹ç›®æ ‡å¯¹è±¡ã€‚ä¹Ÿä¸å¯èƒ½èŽ·å–æˆ–ä¿®æ”¹å¤„ç†ç¨‹åºå¯¹è±¡ã€‚")]),e._v(" "),n("p",[e._v("æœ€è¿‘ä¼¼çš„æ˜¯Ben Nadelçš„æ–‡ç« "),n("a",{attrs:{href:"https://www.bennadel.com/blog/3262-using-proxy-objects-to-dynamically-change-the-this-binding-within-a-generator-in-node-js.htm",target:"_blank",rel:"noopener noreferrer"}},[e._v("Using Proxy to Dynamically Change THIS Binding"),n("OutboundLink")],1),e._v("ï¼Œå®ƒä½¿ç”¨ä¸€ä¸ªç©ºå¯¹è±¡ä½œä¸º"),n("code",[e._v("Proxy")]),e._v("ç›®æ ‡å’Œé—­åŒ…æ¥å·§å¦™åœ°é‡æ–°åˆ†é…å¯¹è±¡çš„"),n("code",[e._v("Proxy")]),e._v("æ“ä½œã€‚")]),e._v(" "),n("h4",{attrs:{id:"proxy-åŽŸè¯­"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#proxy-åŽŸè¯­"}},[e._v("#")]),e._v(" Proxy åŽŸè¯­")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('new Proxy("To be, or not to be...", { })\n\n// TypeError: Cannot create proxy with a non-object as target or handler\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br")])]),n("p",[e._v("ä¸å¹¸çš„æ˜¯ï¼ŒProxyçš„ä¸€ä¸ªé™åˆ¶æ˜¯ç›®æ ‡å¿…é¡»æ˜¯Objectã€‚ è¿™æ„å‘³ç€æˆ‘ä»¬ä¸èƒ½ç›´æŽ¥ä½¿ç”¨åƒStringè¿™æ ·çš„åŽŸè¯­ã€‚ ðŸ˜ž")]),e._v(" "),n("h4",{attrs:{id:"æ€§èƒ½"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ€§èƒ½"}},[e._v("#")]),e._v(" æ€§èƒ½")]),e._v(" "),n("p",[e._v("Proxyçš„ä¸€ä¸ªä¸»è¦ç¼ºç‚¹æ˜¯æ€§èƒ½ã€‚ å› æµè§ˆå™¨å’Œä½¿ç”¨è€Œå¼‚ï¼Œä½†æ˜¯å¯¹äºŽæ€§èƒ½æœ‰è¦æ±‚çš„ä»£ç æ¥è¯´ï¼Œä»£ç†ä¸æ˜¯æœ€å¥½çš„æ–¹æ³•ã€‚ å½“ç„¶ï¼Œå¯ä»¥è¡¡é‡å½±å“å¹¶ç¡®å®šä»£ç†çš„ä¼˜åŠ¿æ˜¯å¦è¶…è¿‡å¯¹æ€§èƒ½çš„å½±å“ã€‚")]),e._v(" "),n("h2",{attrs:{id:"ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-proxyï¼Ÿ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-proxyï¼Ÿ"}},[e._v("#")]),e._v(" ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ Proxyï¼Ÿ")]),e._v(" "),n("p",[e._v("Proxy æä¾›è™šæ‹ŸåŒ–æŽ¥å£æ¥æŽ§åˆ¶ä»»ä½•ç›®æ ‡ Objectçš„è¡Œä¸ºã€‚ è¿™æ ·åšå¯ä»¥åœ¨ç®€å•æ€§å’Œå®žç”¨æ€§ä¹‹é—´å–å¾—å¹³è¡¡ï¼Œè€Œä¸ä¼šç‰ºç‰²å…¼å®¹æ€§ã€‚")]),e._v(" "),n("p",[e._v("ä¹Ÿè®¸ä½¿ç”¨"),n("code",[e._v("Proxy")]),e._v("çš„æœ€ä»¤äººä¿¡æœçš„ç†ç”±æ˜¯ï¼Œä¸Šé¢çš„è®¸å¤šç¤ºä¾‹åªæœ‰å‡ è¡Œï¼Œå¹¶ä¸”å¯ä»¥è½»æ¾ç»„åˆä»¥åˆ›å»ºå¤æ‚çš„åŠŸèƒ½ã€‚ æœ€åŽä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥ä»Žå‡ ä¸ªç”¨ä¾‹ä¸­ç»„åˆå‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªåªè¯»"),n("code",[e._v("cookie")]),e._v("å¯¹è±¡ï¼Œè¯¥å¯¹è±¡è¿”å›žä¸å­˜åœ¨æˆ–â€œç§æœ‰â€éšè—cookieçš„é»˜è®¤å€¼ã€‚")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('// document.cookie = "_octo=GH1.2.2591.47507; _ga=GA1.1.62208.4087; has_recent_activity=1"\n\nlet docCookies = withZeroValue(hide(readOnlyView(getCookieObject())), "Cookie not found")\n\ndocCookies.has_recent_activity  // "1"\ndocCookies.nonExistentCookie    // "Cookie not found"\ndocCookies._ga                  // "Cookie not found"\ndocCookies.newCookie = "1"      // Uncaught Error: Can\'t modify read-only view\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br")])]),n("p",[e._v("æˆ‘å¸Œæœ›è¿™äº›ä¾‹å­å·²ç»è¡¨æ˜Žï¼Œå¯¹äºŽJavascriptä¸­çš„å°ä¼—å…ƒç¼–ç¨‹æ¥è¯´ï¼Œä»£ç†ä¸ä»…ä»…æ˜¯ä¸€ä¸ªæ·±å¥¥çš„ç‰¹æ€§ã€‚"),n("strong",[e._v("ä¸ºäº†ä¿è¯çš„å¯è¯»æ€§ï¼Œæœ¬æ–‡é‡‡ç”¨æ„è¯‘è€Œéžç›´è¯‘ã€‚")])]),e._v(" "),n("h2",{attrs:{id:"proxy-ä»‹ç»-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#proxy-ä»‹ç»-2"}},[e._v("#")]),e._v(" Proxy ä»‹ç»")]),e._v(" "),n("p",[e._v("ä½¿ç”¨"),n("code",[e._v("Proxy")]),e._v("ï¼Œä½ å¯ä»¥å°†ä¸€åªçŒ«ä¼ªè£…æˆä¸€åªè€è™Žã€‚ä¸‹é¢å¤§çº¦æœ‰6ä¸ªä¾‹å­ï¼Œæˆ‘å¸Œæœ›å®ƒä»¬èƒ½è®©ä½ ç›¸ä¿¡ï¼ŒProxy æä¾›äº†å¼ºå¤§çš„ Javascript å…ƒç¼–ç¨‹ã€‚")]),e._v(" "),n("p",[e._v("å°½ç®¡å®ƒä¸åƒå…¶ä»–ES6åŠŸèƒ½ç”¨çš„æ™®éï¼Œä½†"),n("code",[e._v("Proxy")]),e._v("æœ‰è®¸å¤šç”¨é€”ï¼ŒåŒ…æ‹¬"),n("a",{attrs:{href:"https://hackernoon.com/introducing-javascript-es6-proxies-1327419ab413",target:"_blank",rel:"noopener noreferrer"}},[e._v("è¿ç®—ç¬¦é‡è½½"),n("OutboundLink")],1),e._v("ï¼Œ"),n("a",{attrs:{href:"https://en.wikipedia.org/wiki/Mock_object",target:"_blank",rel:"noopener noreferrer"}},[e._v("å¯¹è±¡æ¨¡æ‹Ÿ"),n("OutboundLink")],1),e._v("ï¼Œ"),n("a",{attrs:{href:"https://medium.com/dailyjs/how-to-use-javascript-proxies-for-fun-and-profit-365579d4a9f8",target:"_blank",rel:"noopener noreferrer"}},[e._v("ç®€æ´è€Œçµæ´»çš„APIåˆ›å»º"),n("OutboundLink")],1),e._v("ï¼Œ"),n("a",{attrs:{href:"https://github.com/sindresorhus/on-change",target:"_blank",rel:"noopener noreferrer"}},[e._v("å¯¹è±¡å˜åŒ–äº‹ä»¶"),n("OutboundLink")],1),e._v("ï¼Œç”šè‡³"),n("a",{attrs:{href:"https://medium.com/@gustojs/vuejs-3-and-other-top-news-from-q-a-event-with-core-vue-devs-c9834946ae7b",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue 3èƒŒåŽçš„å†…éƒ¨å“åº”ç³»ç»Ÿæä¾›åŠ¨åŠ›"),n("OutboundLink")],1),e._v("ã€‚")]),e._v(" "),n("p",[n("code",[e._v("Proxy")]),e._v("ç”¨äºŽä¿®æ”¹æŸäº›æ“ä½œçš„é»˜è®¤è¡Œä¸ºï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºåœ¨ç›®æ ‡å¯¹è±¡ä¹‹å‰æž¶è®¾ä¸€å±‚æ‹¦æˆªï¼Œå¤–éƒ¨æ‰€æœ‰çš„è®¿é—®éƒ½å¿…é¡»å…ˆé€šè¿‡è¿™å±‚æ‹¦æˆªï¼Œå› æ­¤æä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œå¯ä»¥å¯¹å¤–éƒ¨çš„è®¿é—®è¿›è¡Œè¿‡æ»¤å’Œä¿®æ”¹ã€‚è¿™ä¸ªè¯çš„åŽŸç†ä¸ºä»£ç†ï¼Œåœ¨è¿™é‡Œå¯ä»¥è¡¨ç¤ºç”±å®ƒæ¥â€œä»£ç†â€æŸäº›æ“ä½œï¼Œè¯‘ä¸ºâ€œä»£ç†å™¨â€ã€‚")]),e._v(" "),n("p",[e._v("ES6åŽŸç”Ÿæä¾›äº†"),n("code",[e._v("Proxy")]),e._v("æž„é€ å‡½æ•°ï¼Œç”¨æ¥ç”Ÿæˆ"),n("code",[e._v("Proxy")]),e._v("å®žä¾‹ã€‚")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("var proxy = new Proxy(target, handler);\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br")])]),n("p",[n("code",[e._v("Proxy")]),e._v("å¯¹è±¡çš„æ‰€æœ‰ç”¨æ³•ï¼Œéƒ½æ˜¯ä¸Šé¢çš„è¿™ç§å½¢å¼ã€‚ä¸åŒçš„åªæ˜¯"),n("code",[e._v("handle")]),e._v("å‚æ•°çš„å†™æ³•ã€‚å…¶ä¸­"),n("code",[e._v("new Proxy")]),e._v("ç”¨æ¥ç”Ÿæˆ"),n("code",[e._v("Proxy")]),e._v("å®žä¾‹ï¼Œ"),n("code",[e._v("target")]),e._v("æ˜¯è¡¨ç¤ºæ‰€è¦æ‹¦æˆªçš„å¯¹è±¡ï¼Œ"),n("code",[e._v("handle")]),e._v("æ˜¯ç”¨æ¥å®šåˆ¶æ‹¦æˆªè¡Œä¸ºçš„å¯¹è±¡ã€‚")]),e._v(" "),n("p",[e._v("ä¸‹é¢æ˜¯ Proxy æœ€ç®€å•çš„ä¾‹å­æ˜¯ï¼Œè¿™æ˜¯ä¸€ä¸ªæœ‰é™·é˜±çš„ä»£ç†ï¼Œä¸€ä¸ª"),n("code",[e._v("get")]),e._v("é™·é˜±ï¼Œæ€»æ˜¯è¿”å›ž"),n("code",[e._v("42")]),e._v("ã€‚")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("let target = {\n  x: 10,\n  y: 20\n}\n\nlet hanler = {\n  get: (obj, prop) => 42\n}\n\ntarget = new Proxy(target, hanler)\n\ntarget.x //42\ntarget.y //42\ntarget.x // 42\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br"),n("span",{staticClass:"line-number"},[e._v("13")]),n("br"),n("span",{staticClass:"line-number"},[e._v("14")]),n("br")])]),n("p",[e._v("ç»“æžœæ˜¯ä¸€ä¸ªå¯¹è±¡å°†ä¸ºä»»ä½•å±žæ€§è®¿é—®æ“ä½œéƒ½è¿”å›žâ€œ42â€ã€‚ è¿™åŒ…æ‹¬"),n("code",[e._v("target.x")]),e._v("ï¼Œ"),n("code",[e._v("target['x']")]),e._v("ï¼Œ"),n("code",[e._v("Reflect.get(target, 'x')")]),e._v("ç­‰ã€‚")]),e._v(" "),n("p",[e._v("ä½†æ˜¯ï¼ŒProxy é™·é˜±å½“ç„¶ä¸é™äºŽå±žæ€§çš„è¯»å–ã€‚ å®ƒåªæ˜¯åå‡ ä¸ªä¸åŒé™·é˜±ä¸­çš„ä¸€ä¸ªï¼š")]),e._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/get",target:"_blank",rel:"noopener noreferrer"}},[e._v("handler.get"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/set",target:"_blank",rel:"noopener noreferrer"}},[e._v("handler.set"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/has",target:"_blank",rel:"noopener noreferrer"}},[e._v("handler.has"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/apply",target:"_blank",rel:"noopener noreferrer"}},[e._v("handler.apply"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/construct",target:"_blank",rel:"noopener noreferrer"}},[e._v("handler.construct"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/ownKeys",target:"_blank",rel:"noopener noreferrer"}},[e._v("handler.ownKeys"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/deleteProperty",target:"_blank",rel:"noopener noreferrer"}},[e._v("handler.deleteProperty"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/defineProperty",target:"_blank",rel:"noopener noreferrer"}},[e._v("handler.defineProperty"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/isExtensible",target:"_blank",rel:"noopener noreferrer"}},[e._v("handler.isExtensible"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/preventExtensions",target:"_blank",rel:"noopener noreferrer"}},[e._v("handler.preventExtensions"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/getPrototypeOf",target:"_blank",rel:"noopener noreferrer"}},[e._v("handler.getPrototypeOf"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/setPrototypeOf",target:"_blank",rel:"noopener noreferrer"}},[e._v("handler.setPrototypeOf"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/getOwnPropertyDescriptor",target:"_blank",rel:"noopener noreferrer"}},[e._v("handler.getOwnPropertyDescriptor"),n("OutboundLink")],1)])]),e._v(" "),n("h2",{attrs:{id:"proxy-ç”¨ä¾‹-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#proxy-ç”¨ä¾‹-2"}},[e._v("#")]),e._v(" Proxy ç”¨ä¾‹")]),e._v(" "),n("p",[n("img",{attrs:{src:"https://segmentfault.com/img/bVbuRz3?w=697&h=344",alt:"clipboard.png"}})]),e._v(" "),n("h4",{attrs:{id:"é»˜è®¤å€¼-â€œé›¶å€¼â€-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#é»˜è®¤å€¼-â€œé›¶å€¼â€-2"}},[e._v("#")]),e._v(" "),n("strong",[e._v("é»˜è®¤å€¼/â€œé›¶å€¼â€")])]),e._v(" "),n("p",[e._v("åœ¨ Go è¯­è¨€ä¸­ï¼Œæœ‰"),n("a",{attrs:{href:"https://tour.golang.org/basics/12",target:"_blank",rel:"noopener noreferrer"}},[e._v("é›¶å€¼"),n("OutboundLink")],1),e._v("çš„æ¦‚å¿µï¼Œé›¶å€¼æ˜¯ç‰¹å®šäºŽç±»åž‹çš„éšå¼é»˜è®¤ç»“æž„å€¼ã€‚å…¶æ€æƒ³æ˜¯æä¾›ç±»åž‹å®‰å…¨çš„é»˜è®¤åŸºå…ƒå€¼ï¼Œæˆ–è€…ç”¨gopherçš„è¯è¯´ï¼Œç»™ç»“æž„ä¸€ä¸ªæœ‰ç”¨çš„é›¶å€¼ã€‚")]),e._v(" "),n("p",[e._v("è™½ç„¶ä¸åŒçš„åˆ›å»ºæ¨¡å¼æ”¯æŒç±»ä¼¼çš„åŠŸèƒ½ï¼Œä½†Javascriptæ— æ³•ç”¨éšå¼åˆå§‹å€¼åŒ…è£…å¯¹è±¡ã€‚Javascriptä¸­æœªè®¾ç½®å±žæ€§çš„é»˜è®¤å€¼æ˜¯"),n("code",[e._v("undefined")]),e._v("ã€‚ä½† Proxy å¯ä»¥æ”¹å˜è¿™ç§æƒ…å†µã€‚")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("const withZeroValue = (target, zeroValue) => new Proxy(target, {\n  get: (obj, prop) => (prop in obj) ? obj[prop] : zeroValue\n})\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br")])]),n("p",[e._v("å‡½æ•°"),n("code",[e._v("withZeroValue")]),e._v(" ç”¨æ¥åŒ…è£…ç›®æ ‡å¯¹è±¡ã€‚ å¦‚æžœè®¾ç½®äº†å±žæ€§ï¼Œåˆ™è¿”å›žå±žæ€§å€¼ã€‚ å¦åˆ™ï¼Œå®ƒè¿”å›žä¸€ä¸ªé»˜è®¤çš„**â€œé›¶å€¼â€**ã€‚")]),e._v(" "),n("p",[e._v("ä»ŽæŠ€æœ¯ä¸Šè®²ï¼Œè¿™ç§æ–¹æ³•ä¹Ÿä¸æ˜¯éšå«çš„ï¼Œä½†å¦‚æžœæˆ‘ä»¬æ‰©å±•"),n("code",[e._v("withZeroValue")]),e._v("ï¼Œä»¥Boolean ("),n("code",[e._v("false")]),e._v("), Number ("),n("code",[e._v("0")]),e._v("), String ("),n("code",[e._v('""')]),e._v("), Object ("),n("code",[e._v("{}")]),e._v(")ï¼ŒArray ("),n("code",[e._v("[]")]),e._v(")ç­‰å¯¹åº”çš„é›¶å€¼ï¼Œåˆ™å¯èƒ½æ˜¯éšå«çš„ã€‚")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("let pos = {\n  x: 4,\n  y: 19\n}\n\nconsole.log(pos.x, pos.y, pos.z) // 4, 19, undefined\n\npos = withZeroValue(pos, 0)\n\nconsole.log(pos.z, pos.y, pos.z) // 4, 19, 0\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br")])]),n("p",[e._v("æ­¤åŠŸèƒ½å¯èƒ½æœ‰ç”¨çš„ä¸€ä¸ªåœ°æ–¹æ˜¯åæ ‡ç³»ã€‚ ç»˜å›¾åº“å¯ä»¥åŸºäºŽæ•°æ®çš„å½¢çŠ¶è‡ªåŠ¨æ”¯æŒ2Då’Œ3Dæ¸²æŸ“ã€‚ ä¸æ˜¯åˆ›å»ºä¸¤ä¸ªå•ç‹¬çš„æ¨¡åž‹ï¼Œè€Œæ˜¯å§‹ç»ˆå°†"),n("code",[e._v("z")]),e._v("é»˜è®¤ä¸º "),n("code",[e._v("0")]),e._v(" è€Œä¸æ˜¯"),n("code",[e._v("undefined")]),e._v("ï¼Œè¿™å¯èƒ½æ˜¯æœ‰æ„ä¹‰çš„ã€‚")]),e._v(" "),n("h2",{attrs:{id:"è´Ÿç´¢å¼•æ•°ç»„-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è´Ÿç´¢å¼•æ•°ç»„-2"}},[e._v("#")]),e._v(" è´Ÿç´¢å¼•æ•°ç»„")]),e._v(" "),n("p",[e._v("åœ¨JSä¸­èŽ·å–æ•°ç»„ä¸­çš„æœ€åŽä¸€ä¸ªå…ƒç´ æ–¹å¼é€šè¿‡å†™çš„å¾ˆå†—é•¿ä¸”é‡å¤ï¼Œä¹Ÿå®¹æ˜“å‡ºé”™ã€‚ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæœ‰ä¸€ä¸ªTC39ææ¡ˆå®šä¹‰äº†ä¸€ä¸ªä¾¿åˆ©å±žæ€§"),n("code",[e._v("Array.lastItem")]),e._v("æ¥èŽ·å–å’Œè®¾ç½®æœ€åŽä¸€ä¸ªå…ƒç´ ã€‚")]),e._v(" "),n("p",[e._v("å…¶ä»–è¯­è¨€ï¼Œå¦‚Pythonå’ŒRubyï¼Œä½¿ç”¨è´Ÿç»„ç´¢å¼•æ›´å®¹æ˜“è®¿é—®æœ€åŽé¢çš„å…ƒç´ ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ç®€å•åœ°ä½¿ç”¨"),n("code",[e._v("arr[-1]")]),e._v("æ›¿ä»£"),n("code",[e._v("arr[arr.length-1]")]),e._v("è®¿é—®æœ€åŽä¸€ä¸ªå…ƒç´ ã€‚")]),e._v(" "),n("p",[e._v("ä½¿ç”¨ Proxy ä¹Ÿå¯ä»¥åœ¨ Javascript ä¸­ä½¿ç”¨è´Ÿç´¢å¼•ã€‚")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("const negativeArray = (els) => new Proxy(els, {\n  get: (target, propKey, receiver) => Reflect.get(target,\n    (+propKey < 0) ? String(target.length + +propKey) : propKey, receiver)\n});\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br")])]),n("p",[e._v("ä¸€ä¸ªé‡è¦çš„æ³¨æ„äº‹é¡¹æ˜¯åŒ…å«"),n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/get",target:"_blank",rel:"noopener noreferrer"}},[e._v("handler.get"),n("OutboundLink")],1),e._v("çš„é™·é˜±å­—ç¬¦ä¸²åŒ–æ‰€æœ‰å±žæ€§ã€‚ å¯¹äºŽæ•°ç»„è®¿é—®ï¼Œæˆ‘ä»¬éœ€è¦å°†å±žæ€§åç§°å¼ºåˆ¶è½¬æ¢ä¸º"),n("code",[e._v("Numbers")]),e._v("ï¼Œè¿™æ ·å°±å¯ä»¥ä½¿ç”¨ä¸€å…ƒåŠ è¿ç®—ç¬¦ç®€æ´åœ°å®Œæˆã€‚")]),e._v(" "),n("p",[e._v("çŽ°åœ¨"),n("code",[e._v("[-1]")]),e._v("è®¿é—®æœ€åŽä¸€ä¸ªå…ƒç´ ï¼Œ"),n("code",[e._v("[-2]")]),e._v("è®¿é—®å€’æ•°ç¬¬äºŒä¸ªå…ƒç´ ï¼Œä»¥æ­¤ç±»æŽ¨ã€‚")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("const unicorn = negativeArray(['ðŸ´', 'ðŸŽ‚', 'ðŸŒˆ']);\n\nunicorn[-1] // 'ðŸŒˆ'\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br")])]),n("h2",{attrs:{id:"éšè—å±žæ€§-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#éšè—å±žæ€§-2"}},[e._v("#")]),e._v(" éšè—å±žæ€§")]),e._v(" "),n("p",[e._v("ä¼—æ‰€å‘¨çŸ¥ JS æ²¡æœ‰ç§æœ‰å±žæ€§ã€‚ "),n("code",[e._v("Symbol")]),e._v("æœ€åˆæ˜¯ä¸ºäº†"),n("a",{attrs:{href:"https://codeburst.io/a-practical-guide-to-es6-symbol-3fc90117c7ac",target:"_blank",rel:"noopener noreferrer"}},[e._v("å¯ç”¨ç§æœ‰å±žæ€§è€Œå¼•å…¥çš„"),n("OutboundLink")],1),e._v("ï¼Œä½†åŽæ¥ä½¿ç”¨åƒ"),n("code",[e._v("Object.getOwnPropertySymbols")]),e._v("è¿™æ ·çš„åå°„æ–¹æ³•è¿›è¡Œäº†æ·¡åŒ–ï¼Œè¿™ä½¿å¾—å®ƒä»¬å¯ä»¥è¢«å…¬å¼€å‘çŽ°ã€‚")]),e._v(" "),n("p",[e._v("é•¿æœŸä»¥æ¥çš„æƒ¯ä¾‹æ˜¯å°†ç§æœ‰å±žæ€§å‘½åä¸ºå‰ä¸‹åˆ’çº¿"),n("code",[e._v("_")]),e._v("ï¼Œæœ‰æ•ˆåœ°æ ‡è®°å®ƒä»¬â€œä¸è¦è®¿é—®â€ã€‚"),n("code",[e._v("Prox")]),e._v(" æä¾›äº†ä¸€ç§ç¨å¾®æ›´å¥½çš„æ–¹æ³•æ¥å±è”½è¿™äº›å±žæ€§ã€‚")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("const hide = (target, prefix = '_') => new Proxy(target, {\n  has: (obj, prop) => (!prop.startsWith(prefix) && prop in obj),\n  ownKeys: (obj) => Reflect.ownKeys(obj)\n    .filter(prop => (typeof prop !== \"string\" || !prop.startsWith(prefix))),\n  get: (obj, prop, rec) => (prop in rec) ? obj[prop] : undefined\n})\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br")])]),n("p",[n("code",[e._v("hide")]),e._v("å‡½æ•°åŒ…è£…ç›®æ ‡å¯¹è±¡ï¼Œå¹¶ä½¿å¾—ä»Ž"),n("code",[e._v("in")]),e._v("è¿ç®—ç¬¦å’Œ"),n("code",[e._v("Object.getOwnPropertyNames")]),e._v("ç­‰æ–¹æ³•æ— æ³•è®¿é—®å¸¦æœ‰ä¸‹åˆ’çº¿çš„å±žæ€§ã€‚")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("let userData = hide({\n  firstName: 'Tom',\n  mediumHandle: '@tbarrasso',\n  _favoriteRapper: 'Drake'\n})\n\nuserData._favoriteRapper        // undefined\n('_favoriteRapper' in userData) // false\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br")])]),n("p",[e._v("æ›´å®Œæ•´çš„å®žçŽ°è¿˜åŒ…æ‹¬è¯¸å¦‚"),n("code",[e._v("deleteProperty")]),e._v("å’Œ"),n("code",[e._v("defineProperty")]),e._v("ä¹‹ç±»çš„é™·é˜±ã€‚ é™¤äº†é—­åŒ…ä¹‹å¤–ï¼Œè¿™å¯èƒ½æ˜¯æœ€æŽ¥è¿‘çœŸæ­£ç§æœ‰å±žæ€§çš„æ–¹æ³•ï¼Œå› ä¸ºå®ƒä»¬æ— æ³•é€šè¿‡æžšä¸¾ï¼Œå…‹éš†ï¼Œè®¿é—®æˆ–ä¿®æ”¹æ¥è®¿é—®ã€‚")]),e._v(" "),n("p",[n("img",{attrs:{src:"https://segmentfault.com/img/bVbuSTv?w=975&h=62",alt:"clipboard.png"}})]),e._v(" "),n("p",[e._v("ä½†æ˜¯ï¼Œå®ƒä»¬åœ¨å¼€å‘æŽ§åˆ¶å°ä¸­å¯è§ã€‚ åªæœ‰é—­åŒ…æ‰èƒ½å…äºŽè¿™ç§å‘½è¿ã€‚")]),e._v(" "),n("h2",{attrs:{id:"ç¼“å­˜-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç¼“å­˜-2"}},[e._v("#")]),e._v(" ç¼“å­˜")]),e._v(" "),n("p",[e._v("åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´åŒæ­¥çŠ¶æ€æ—¶é‡åˆ°å›°éš¾å¹¶ä¸ç½•è§ã€‚æ•°æ®å¯èƒ½ä¼šéšç€æ—¶é—´çš„æŽ¨ç§»è€Œå‘ç”Ÿå˜åŒ–ï¼Œå¾ˆéš¾ç¡®åˆ‡åœ°çŸ¥é“ä½•æ—¶é‡æ–°åŒæ­¥çš„é€»è¾‘ã€‚")]),e._v(" "),n("p",[n("code",[e._v("Proxy")]),e._v("å¯ç”¨äº†ä¸€ç§æ–°æ–¹æ³•ï¼šæ ¹æ®éœ€è¦å°†å¯¹è±¡åŒ…è£…ä¸ºæ— æ•ˆï¼ˆå’Œé‡æ–°åŒæ­¥ï¼‰å±žæ€§ã€‚ æ‰€æœ‰è®¿é—®å±žæ€§çš„å°è¯•éƒ½é¦–å…ˆæ£€æŸ¥ç¼“å­˜ç­–ç•¥ï¼Œè¯¥ç­–ç•¥å†³å®šè¿”å›žå½“å‰åœ¨å†…å­˜ä¸­çš„å†…å®¹è¿˜æ˜¯é‡‡å–å…¶ä»–ä¸€äº›æ“ä½œã€‚")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("const ephemeral = (target, ttl = 60) => {\n  const CREATED_AT = Date.now()\n  const isExpired = () => (Date.now() - CREATED_AT) > (ttl * 1000)\n  \n  return new Proxy(target, {\n    get: (obj, prop) => isExpired() ? undefined : Reflect.get(obj, prop)\n  })\n}\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br")])]),n("p",[e._v("è¿™ä¸ªå‡½æ•°è¿‡äºŽç®€åŒ–äº†:å®ƒä½¿å¯¹è±¡ä¸Šçš„æ‰€æœ‰å±žæ€§åœ¨ä¸€æ®µæ—¶é—´åŽéƒ½æ— æ³•è®¿é—®ã€‚ç„¶è€Œï¼Œå°†æ­¤æ–¹æ³•æ‰©å±•ä¸ºæ ¹æ®æ¯ä¸ªå±žæ€§è®¾ç½®ç”Ÿå­˜æ—¶é—´(TTL)ï¼Œå¹¶åœ¨ä¸€å®šçš„æŒç»­æ—¶é—´æˆ–è®¿é—®æ¬¡æ•°ä¹‹åŽæ›´æ–°å®ƒå¹¶ä¸å›°éš¾ã€‚")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("let bankAccount = ephemeral({\n  balance: 14.93\n}, 10)\n\nconsole.log(bankAccount.balance)    // 14.93\n\nsetTimeout(() => {\n  console.log(bankAccount.balance)  // undefined\n}, 10 * 1000)\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br")])]),n("p",[e._v("è¿™ä¸ªç¤ºä¾‹ç®€å•åœ°ä½¿é“¶è¡Œå¸æˆ·ä½™é¢åœ¨10ç§’åŽæ— æ³•è®¿é—®ã€‚")]),e._v(" "),n("h2",{attrs:{id:"æžšä¸¾å’Œåªè¯»è§†å›¾-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æžšä¸¾å’Œåªè¯»è§†å›¾-2"}},[e._v("#")]),e._v(" æžšä¸¾å’Œåªè¯»è§†å›¾")]),e._v(" "),n("p",[e._v("è¿™äº›ä¾‹å­æ¥è‡ª"),n("code",[e._v("Csaba Hellinge å…³äºŽ[ä»£ç†ç”¨ä¾‹][23]å’Œ[Mozillaé»‘å®¢][24]çš„æ–‡ç« ã€‚æ–¹æ³•æ˜¯åŒ…è£…ä¸€ä¸ªå¯¹è±¡ä»¥é˜²æ­¢æ‰©å±•æˆ–ä¿®æ”¹ã€‚è™½ç„¶")]),e._v("object.freeze`çŽ°åœ¨æä¾›äº†å°†å¯¹è±¡æ¸²æŸ“ä¸ºåªè¯»çš„åŠŸèƒ½ï¼Œä½†æ˜¯å¯ä»¥å¯¹è¿™ç§æ–¹æ³•è¿›è¡Œæ‰©å±•ï¼Œä»¥ä¾¿è®¿é—®ä¸å­˜åœ¨å±žæ€§çš„æžšä¸¾å¯¹è±¡èƒ½æ›´å¥½åœ°å¤„ç†æŠ›å‡ºé”™è¯¯ã€‚")]),e._v(" "),n("h4",{attrs:{id:"åªè¯»è§†å›¾-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#åªè¯»è§†å›¾-2"}},[e._v("#")]),e._v(" "),n("strong",[e._v("åªè¯»è§†å›¾")])]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('const NOPE = () => {\n  throw new Error("Can\'t modify read-only view");\n}\n\nconst NOPE_HANDLER = {\n  set: NOPE,\n  defineProperty: NOPE,\n  deleteProperty: NOPE,\n  preventExtensions: NOPE,\n  setPrototypeOf: NOPE\n}\n\nconst readOnlyView = target =>\n  new Proxy(target, NOPE_HANDLER)\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br"),n("span",{staticClass:"line-number"},[e._v("13")]),n("br"),n("span",{staticClass:"line-number"},[e._v("14")]),n("br")])]),n("h4",{attrs:{id:"æžšä¸¾è§†å›¾-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æžšä¸¾è§†å›¾-2"}},[e._v("#")]),e._v(" "),n("strong",[e._v("æžšä¸¾è§†å›¾")])]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('const createEnum = (target) => readOnlyView(new Proxy(target, {\n  get: (obj, prop) => {\n    if (prop in obj) {\n      return Reflect.get(obj, prop)\n    }\n    throw new ReferenceError(`Unknown prop "${prop}"`)\n  }\n}))\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br")])]),n("p",[e._v("çŽ°åœ¨æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ª"),n("code",[e._v("Object")]),e._v("ï¼Œå¦‚æžœå°è¯•è®¿é—®ä¸å­˜åœ¨çš„å±žæ€§çŽ°åœ¨ä¸æ˜¯è¿”å›ž"),n("code",[e._v("undefined")]),e._v("ï¼Œè€Œæ˜¯ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚ è¿™ä½¿å¾—åœ¨æ—©æœŸæ•èŽ·å’Œè§£å†³é—®é¢˜å˜å¾—æ›´åŠ å®¹æ˜“ã€‚")]),e._v(" "),n("p",[e._v("æˆ‘ä»¬çš„"),n("code",[e._v("enum")]),e._v("ç¤ºä¾‹ä¹Ÿæ˜¯ä»£ç†ä¸Šçš„ä»£ç†çš„ç¬¬ä¸€ä¸ªç¤ºä¾‹ï¼Œå®ƒç¡®è®¤ä»£ç†æ˜¯å¦ä¸€ä¸ªä»£ç†çš„æœ‰æ•ˆç›®æ ‡å¯¹è±¡ã€‚è¿™é€šè¿‡ç»„åˆä»£ç†åŠŸèƒ½ä¿ƒè¿›äº†ä»£ç é‡ç”¨ã€‚")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('let SHIRT_SIZES = createEnum({\n  S: 10,\n  M: 15,\n  L: 20\n})\n\nSHIRT_SIZES.S // 10\nSHIRT_SIZES.S = 15\n\n// Uncaught Error: Can\'t modify read-only view\n\nSHIRT_SIZES.XL\n\n// Uncaught ReferenceError: Unknown prop "XL"\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br"),n("span",{staticClass:"line-number"},[e._v("13")]),n("br"),n("span",{staticClass:"line-number"},[e._v("14")]),n("br")])]),n("p",[e._v("è¿™ç§æ–¹æ³•å¯ä»¥è¿›ä¸€æ­¥æ‰©å±•ï¼ŒåŒ…æ‹¬æ¨¡æ‹Ÿæ–¹æ³•"),n("code",[e._v("nameOf")]),e._v("ï¼Œå®ƒè¿”å›žç»™å®š"),n("code",[e._v("enum")]),e._v("å€¼çš„å±žæ€§åï¼Œæ¨¡ä»¿Javascriptç­‰è¯­è¨€ä¸­çš„è¡Œä¸ºã€‚")]),e._v(" "),n("p",[e._v("è™½ç„¶å…¶ä»–æ¡†æž¶å’Œè¯­è¨€è¶…é›†(æ¯”å¦‚TypeScript)æä¾›"),n("code",[e._v("enum")]),e._v("ç±»åž‹ï¼Œä½†æ˜¯è¿™ä¸ªè§£å†³æ–¹æ¡ˆçš„ç‹¬ç‰¹ä¹‹å¤„åœ¨äºŽï¼Œå®ƒä½¿ç”¨æ™®é€šJavascriptï¼Œè€Œä¸ä½¿ç”¨ç‰¹æ®Šçš„æž„å»ºå·¥å…·æˆ–è½¬ç½®å™¨ã€‚")]),e._v(" "),n("h2",{attrs:{id:"è¿ç®—ç¬¦é‡è½½-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è¿ç®—ç¬¦é‡è½½-2"}},[e._v("#")]),e._v(" è¿ç®—ç¬¦é‡è½½")]),e._v(" "),n("p",[e._v("ä¹Ÿè®¸ä»Žè¯­æ³•ä¸Šè®²ï¼Œæœ€å¸å¼•äººçš„ "),n("code",[e._v("Proxy")]),e._v(" ç”¨ä¾‹æ˜¯é‡è½½æ“ä½œç¬¦çš„èƒ½åŠ›ï¼Œæ¯”å¦‚ä½¿ç”¨"),n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/has",target:"_blank",rel:"noopener noreferrer"}},[e._v("handler.has"),n("OutboundLink")],1),e._v("çš„"),n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/in",target:"_blank",rel:"noopener noreferrer"}},[e._v("in"),n("OutboundLink")],1),e._v("æ“ä½œç¬¦ã€‚")]),e._v(" "),n("p",[n("code",[e._v("in")]),e._v("æ“ä½œç¬¦ç”¨äºŽæ£€æŸ¥æŒ‡å®šçš„å±žæ€§æ˜¯å¦ä½äºŽæŒ‡å®šçš„å¯¹è±¡æˆ–å…¶åŽŸåž‹é“¾ä¸­ã€‚ä½†å®ƒä¹Ÿæ˜¯è¯­æ³•ä¸Šæœ€ä¼˜é›…çš„é‡è½½æ“ä½œç¬¦ã€‚è¿™ä¸ªä¾‹å­å®šä¹‰äº†ä¸€ä¸ªè¿žç»­"),n("code",[e._v("range")]),e._v("å‡½æ•°æ¥æ¯”è¾ƒæ•°å­—ã€‚")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("const range = (min, max) => new Proxy(Object.create(null), {\n  has: (_, prop) => (+prop >= min && +prop <= max)\n})\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br")])]),n("p",[e._v("ä¸ŽPythonä¸åŒï¼ŒPythonä½¿ç”¨ç”Ÿæˆå™¨ä¸Žæœ‰é™çš„æ•´æ•°åºåˆ—è¿›è¡Œæ¯”è¾ƒï¼Œè¿™ç§æ–¹æ³•æ”¯æŒåè¿›åˆ¶æ¯”è¾ƒï¼Œå¯ä»¥æ‰©å±•ä¸ºæ”¯æŒå…¶ä»–æ•°å€¼èŒƒå›´ã€‚")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("const X = 10.5\nconst nums = [1, 5, X, 50, 100]\n\nif (X in range(1, 100)) { // true\n  // ...\n}\n\nnums.filter(n => n in range(1, 10)) // [1, 5]\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br")])]),n("p",[e._v("å°½ç®¡è¿™ä¸ªç”¨ä¾‹ä¸èƒ½è§£å†³å¤æ‚çš„é—®é¢˜ï¼Œä½†å®ƒç¡®å®žæä¾›äº†å¹²å‡€ã€å¯è¯»å’Œå¯é‡ç”¨çš„ä»£ç ã€‚")]),e._v(" "),n("p",[e._v("é™¤äº†"),n("code",[e._v("in")]),e._v("è¿ç®—ç¬¦ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é‡è½½"),n("code",[e._v("delete")]),e._v("å’Œ"),n("code",[e._v("new")]),e._v("ã€‚")]),e._v(" "),n("h2",{attrs:{id:"cookieå¯¹è±¡-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#cookieå¯¹è±¡-2"}},[e._v("#")]),e._v(" cookieå¯¹è±¡")]),e._v(" "),n("p",[e._v("å¦‚æžœä½ æ›¾ç»ä¸Ž"),n("code",[e._v("cookie")]),e._v("è¿›è¡Œäº¤äº’ï¼Œé‚£ä¹ˆå¿…é¡»å¤„ç†"),n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie",target:"_blank",rel:"noopener noreferrer"}},[e._v("document.cookie"),n("OutboundLink")],1),e._v("ã€‚ è¿™æ˜¯ä¸€ä¸ªä¸å¯»å¸¸çš„APIï¼Œå› ä¸ºAPIæ˜¯ä¸€ä¸ª"),n("code",[e._v("String")]),e._v("ï¼Œå®ƒè¯»å‡ºæ‰€æœ‰"),n("code",[e._v("cookie")]),e._v("ï¼Œä»¥"),n("strong",[e._v("åˆ†å·åˆ†éš”")]),e._v("ã€‚")]),e._v(" "),n("p",[n("code",[e._v("document.cookie")]),e._v("æ˜¯ä¸€ä¸ªçœ‹èµ·æ¥åƒè¿™æ ·çš„å­—ç¬¦ä¸²ï¼š")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("_octo=GH1.2.2591.47507; _ga=GA1.1.62208.4087; has_recent_activity=1\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br")])]),n("p",[e._v("ç®€è€Œè¨€ä¹‹ï¼Œå¤„ç†"),n("code",[e._v("document.cookie")]),e._v("æ¯”è¾ƒéº»çƒ¦ä¸”å®¹æ˜“å‡ºé”™ã€‚ ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨"),n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie/Simple_document.cookie_framework",target:"_blank",rel:"noopener noreferrer"}},[e._v("ç®€å•çš„cookieæ¡†æž¶"),n("OutboundLink")],1),e._v("ï¼Œå¯ä»¥é€‚ç”¨äºŽä½¿ç”¨ Proxyã€‚")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("const getCookieObject = () => {\n    const cookies = document.cookie.split(';').reduce((cks, ck) => \n    ({[ck.substr(0, ck.indexOf('=')).trim()]: ck.substr(ck.indexOf('=') + 1), ...cks}), {});\n    const setCookie = (name, val) => document.cookie = `${name}=${val}`;\n    const deleteCookie = (name) => document.cookie = `${name}=; expires=Thu, 01 Jan 1970 00:00:01 GMT;`;\n\n    return new Proxy(cookies, {\n    set: (obj, prop, val) => (setCookie(prop, val), Reflect.set(obj, prop, val)),\n        deleteProperty: (obj, prop) => (deleteCookie(prop), Reflect.deleteProperty(obj, prop))\n     })\n}\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br")])]),n("p",[e._v("æ­¤å‡½æ•°è¿”å›žä¸€ä¸ªé”®å€¼å¯¹å¯¹è±¡ï¼Œä½†ä»£ç†å¯¹"),n("code",[e._v("document.cookie")]),e._v("è¿›è¡ŒæŒä¹…æ€§çš„æ‰€æœ‰æ›´æ”¹ã€‚")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('let docCookies = getCookieObject()\n\ndocCookies.has_recent_activity              // "1"\ndocCookies.has_recent_activity = "2"        // "2"\ndelete docCookies2["has_recent_activity"]   // true\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br")])]),n("p",[e._v("åœ¨11è¡Œä»£ç ä¸­ï¼Œä¿®æ”¹"),n("code",[e._v("cookie")]),e._v("æä¾›äº†æ›´å¥½çš„äº¤äº’ï¼Œå°½ç®¡åœ¨ç”Ÿäº§çŽ¯å¢ƒä¸­è¿˜éœ€è¦è¯¸å¦‚å­—ç¬¦ä¸²è§„èŒƒåŒ–ä¹‹ç±»çš„é™„åŠ åŠŸèƒ½ã€‚")]),e._v(" "),n("p",[e._v("ç»†èŠ‚å†³å®šæˆè´¥ï¼ŒProxy ä¹Ÿä¸ä¾‹å¤–ã€‚")]),e._v(" "),n("h2",{attrs:{id:"polyfill-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#polyfill-2"}},[e._v("#")]),e._v(" Polyfill")]),e._v(" "),n("p",[e._v("åœ¨æ’°å†™æœ¬æ–‡æ—¶(2019å¹´5æœˆ)ï¼ŒProxy æ²¡æœ‰"),n("strong",[e._v("å®Œæ•´çš„ polyfill")]),e._v("ã€‚ç„¶è€Œï¼Œæœ‰ä¸€ä¸ªç”±è°·æ­Œç¼–å†™çš„ "),n("a",{attrs:{href:"https://github.com/GoogleChrome/proxy-polyfill",target:"_blank",rel:"noopener noreferrer"}},[e._v("partial polyfill for Proxy"),n("OutboundLink")],1),e._v(" ï¼Œå®ƒæ”¯æŒ"),n("code",[e._v("get")]),e._v("ã€"),n("code",[e._v("set")]),e._v("ã€"),n("code",[e._v("apply")]),e._v("å’Œ"),n("code",[e._v("construct trap")]),e._v("ï¼Œå¹¶é€‚ç”¨äºŽIE9+ã€‚")]),e._v(" "),n("h4",{attrs:{id:"å®ƒæ˜¯-proxy-å—ï¼Ÿ-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å®ƒæ˜¯-proxy-å—ï¼Ÿ-2"}},[e._v("#")]),e._v(" å®ƒæ˜¯ Proxy å—ï¼Ÿ")]),e._v(" "),n("blockquote",[n("p",[e._v("ç¡®å®šä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ä»£ç†æ˜¯ä¸å¯èƒ½çš„")])]),e._v(" "),n("p",[e._v("æ ¹æ®Javascriptè¯­è¨€è§„èŒƒï¼Œæ— æ³•ç¡®å®šå¯¹è±¡æ˜¯å¦æ˜¯ä»£ç†ã€‚ ä½†æ˜¯ï¼Œåœ¨ Node 10+ä¸Šï¼Œå¯ä»¥ä½¿ç”¨"),n("a",{attrs:{href:"https://nodejs.org/api/util.html#util_util_types_isproxy_value",target:"_blank",rel:"noopener noreferrer"}},[e._v("util.types.isProxy"),n("OutboundLink")],1),e._v("æ–¹æ³•ã€‚")]),e._v(" "),n("h4",{attrs:{id:"ç›®æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç›®æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ-2"}},[e._v("#")]),e._v(" ç›®æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ")]),e._v(" "),n("p",[e._v("ç»™å®šä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œå°±ä¸å¯èƒ½èŽ·å¾—æˆ–æ›´æ”¹ç›®æ ‡å¯¹è±¡ã€‚ä¹Ÿä¸å¯èƒ½èŽ·å–æˆ–ä¿®æ”¹å¤„ç†ç¨‹åºå¯¹è±¡ã€‚")]),e._v(" "),n("p",[e._v("æœ€è¿‘ä¼¼çš„æ˜¯Ben Nadelçš„æ–‡ç« "),n("a",{attrs:{href:"https://www.bennadel.com/blog/3262-using-proxy-objects-to-dynamically-change-the-this-binding-within-a-generator-in-node-js.htm",target:"_blank",rel:"noopener noreferrer"}},[e._v("Using Proxy to Dynamically Change THIS Binding"),n("OutboundLink")],1),e._v("ï¼Œå®ƒä½¿ç”¨ä¸€ä¸ªç©ºå¯¹è±¡ä½œä¸º"),n("code",[e._v("Proxy")]),e._v("ç›®æ ‡å’Œé—­åŒ…æ¥å·§å¦™åœ°é‡æ–°åˆ†é…å¯¹è±¡çš„"),n("code",[e._v("Proxy")]),e._v("æ“ä½œã€‚")]),e._v(" "),n("h4",{attrs:{id:"proxy-åŽŸè¯­-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#proxy-åŽŸè¯­-2"}},[e._v("#")]),e._v(" Proxy åŽŸè¯­")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('new Proxy("To be, or not to be...", { })\n\n// TypeError: Cannot create proxy with a non-object as target or handler\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br")])]),n("p",[e._v("ä¸å¹¸çš„æ˜¯ï¼ŒProxyçš„ä¸€ä¸ªé™åˆ¶æ˜¯ç›®æ ‡å¿…é¡»æ˜¯Objectã€‚ è¿™æ„å‘³ç€æˆ‘ä»¬ä¸èƒ½ç›´æŽ¥ä½¿ç”¨åƒStringè¿™æ ·çš„åŽŸè¯­ã€‚ ðŸ˜ž")]),e._v(" "),n("h4",{attrs:{id:"æ€§èƒ½-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ€§èƒ½-2"}},[e._v("#")]),e._v(" æ€§èƒ½")]),e._v(" "),n("p",[e._v("Proxyçš„ä¸€ä¸ªä¸»è¦ç¼ºç‚¹æ˜¯æ€§èƒ½ã€‚ å› æµè§ˆå™¨å’Œä½¿ç”¨è€Œå¼‚ï¼Œä½†æ˜¯å¯¹äºŽæ€§èƒ½æœ‰è¦æ±‚çš„ä»£ç æ¥è¯´ï¼Œä»£ç†ä¸æ˜¯æœ€å¥½çš„æ–¹æ³•ã€‚ å½“ç„¶ï¼Œå¯ä»¥è¡¡é‡å½±å“å¹¶ç¡®å®šä»£ç†çš„ä¼˜åŠ¿æ˜¯å¦è¶…è¿‡å¯¹æ€§èƒ½çš„å½±å“ã€‚")]),e._v(" "),n("h2",{attrs:{id:"ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-proxyï¼Ÿ-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-proxyï¼Ÿ-2"}},[e._v("#")]),e._v(" ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ Proxyï¼Ÿ")]),e._v(" "),n("p",[e._v("Proxy æä¾›è™šæ‹ŸåŒ–æŽ¥å£æ¥æŽ§åˆ¶ä»»ä½•ç›®æ ‡ Objectçš„è¡Œä¸ºã€‚ è¿™æ ·åšå¯ä»¥åœ¨ç®€å•æ€§å’Œå®žç”¨æ€§ä¹‹é—´å–å¾—å¹³è¡¡ï¼Œè€Œä¸ä¼šç‰ºç‰²å…¼å®¹æ€§ã€‚")]),e._v(" "),n("p",[e._v("ä¹Ÿè®¸ä½¿ç”¨"),n("code",[e._v("Proxy")]),e._v("çš„æœ€ä»¤äººä¿¡æœçš„ç†ç”±æ˜¯ï¼Œä¸Šé¢çš„è®¸å¤šç¤ºä¾‹åªæœ‰å‡ è¡Œï¼Œå¹¶ä¸”å¯ä»¥è½»æ¾ç»„åˆä»¥åˆ›å»ºå¤æ‚çš„åŠŸèƒ½ã€‚ æœ€åŽä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥ä»Žå‡ ä¸ªç”¨ä¾‹ä¸­ç»„åˆå‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªåªè¯»"),n("code",[e._v("cookie")]),e._v("å¯¹è±¡ï¼Œè¯¥å¯¹è±¡è¿”å›žä¸å­˜åœ¨æˆ–â€œç§æœ‰â€éšè—cookieçš„é»˜è®¤å€¼ã€‚")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('// document.cookie = "_octo=GH1.2.2591.47507; _ga=GA1.1.62208.4087; has_recent_activity=1"\n\nlet docCookies = withZeroValue(hide(readOnlyView(getCookieObject())), "Cookie not found")\n\ndocCookies.has_recent_activity  // "1"\ndocCookies.nonExistentCookie    // "Cookie not found"\ndocCookies._ga                  // "Cookie not found"\ndocCookies.newCookie = "1"      // Uncaught Error: Can\'t modify read-only view\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br")])]),n("p",[e._v("æˆ‘å¸Œæœ›è¿™äº›ä¾‹å­å·²ç»è¡¨æ˜Žï¼Œå¯¹äºŽJavascriptä¸­çš„å°ä¼—å…ƒç¼–ç¨‹æ¥è¯´ï¼Œä»£ç†ä¸ä»…ä»…æ˜¯ä¸€ä¸ªæ·±å¥¥çš„ç‰¹æ€§ã€‚")])])}),[],!1,null,null,null);r.default=s.exports}}]);