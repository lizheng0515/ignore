(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{409:function(s,a,n){"use strict";n.r(a);var e=n(2),t=Object(e.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"javascript-深入之类数组对象与-arguments"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#javascript-深入之类数组对象与-arguments"}},[s._v("#")]),s._v(" JavaScript 深入之类数组对象与 arguments")]),s._v(" "),n("blockquote",[n("p",[s._v("JavaScript深入系列第十三篇，讲解类数组对象与对象之间的相似与差异以及arguments的注意要点")])]),s._v(" "),n("h2",{attrs:{id:"类数组对象"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#类数组对象"}},[s._v("#")]),s._v(" 类数组对象")]),s._v(" "),n("p",[s._v("所谓的类数组对象:")]),s._v(" "),n("blockquote",[n("p",[s._v("拥有一个 length 属性和若干索引属性的对象")])]),s._v(" "),n("p",[s._v("举个例子：")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" array "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'name'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'age'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'sex'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" arrayLike "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'name'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'age'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'sex'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    length"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("即便如此，为什么叫做类数组对象呢？")]),s._v(" "),n("p",[s._v("那让我们从读写、获取长度、遍历三个方面看看这两个对象。")]),s._v(" "),n("h2",{attrs:{id:"读写"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#读写"}},[s._v("#")]),s._v(" 读写")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("console.log(array[0]); // name\nconsole.log(arrayLike[0]); // name\n\narray[0] = 'new name';\narrayLike[0] = 'new name';复制代码\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h2",{attrs:{id:"长度"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#长度"}},[s._v("#")]),s._v(" 长度")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("console.log(array.length); // 3\nconsole.log(arrayLike.length); // 3复制代码\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h2",{attrs:{id:"遍历"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#遍历"}},[s._v("#")]),s._v(" 遍历")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("for(var i = 0, len = array.length; i < len; i++) {\n   ……\n}\nfor(var i = 0, len = arrayLike.length; i < len; i++) {\n    ……\n}复制代码\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("是不是很像？")]),s._v(" "),n("p",[s._v("那类数组对象可以使用数组的方法吗？比如：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("arrayLike.push('4');复制代码\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("然而上述代码会报错: arrayLike.push is not a function")]),s._v(" "),n("p",[s._v("所以终归还是类数组呐……")]),s._v(" "),n("h2",{attrs:{id:"调用数组方法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#调用数组方法"}},[s._v("#")]),s._v(" 调用数组方法")]),s._v(" "),n("p",[s._v("如果类数组就是任性的想用数组的方法怎么办呢？")]),s._v(" "),n("p",[s._v("既然无法直接调用，我们可以用 Function.call 间接调用：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('var arrayLike = {0: \'name\', 1: \'age\', 2: \'sex\', length: 3 }\n\nArray.prototype.join.call(arrayLike, \'&\'); // name&age&sex\n\nArray.prototype.slice.call(arrayLike, 0); // ["name", "age", "sex"] \n// slice可以做到类数组转数组\n\nArray.prototype.map.call(arrayLike, function(item){\n    return item.toUpperCase();\n}); \n// ["NAME", "AGE", "SEX"]复制代码\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("h2",{attrs:{id:"类数组转对象"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#类数组转对象"}},[s._v("#")]),s._v(" 类数组转对象")]),s._v(" "),n("p",[s._v("在上面的例子中已经提到了一种类数组转数组的方法，再补充三个：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('var arrayLike = {0: \'name\', 1: \'age\', 2: \'sex\', length: 3 }\n// 1. slice\nArray.prototype.slice.call(arrayLike); // ["name", "age", "sex"] \n// 2. splice\nArray.prototype.splice.call(arrayLike, 0); // ["name", "age", "sex"] \n// 3. ES6 Array.from\nArray.from(arrayLike); // ["name", "age", "sex"] \n// 4. apply\nArray.prototype.concat.apply([], arrayLike)复制代码\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[s._v("那么为什么会讲到类数组对象呢？以及类数组有什么应用吗？")]),s._v(" "),n("p",[s._v("要说到类数组对象，Arguments 对象就是一个类数组对象。在客户端 JavaScript 中，一些 DOM 方法(document.getElementsByTagName()等)也返回类数组对象。")]),s._v(" "),n("h2",{attrs:{id:"arguments对象"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#arguments对象"}},[s._v("#")]),s._v(" Arguments对象")]),s._v(" "),n("p",[s._v("接下来重点讲讲 Arguments 对象。")]),s._v(" "),n("p",[s._v("Arguments 对象只定义在函数体中，包括了函数的参数和其他属性。在函数体中，arguments 指代该函数的 Arguments 对象。")]),s._v(" "),n("p",[s._v("举个例子：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("function foo(name, age, sex) {\n    console.log(arguments);\n}\n\nfoo('name', 'age', 'sex')复制代码\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("打印结果如下：")]),s._v(" "),n("p",[s._v('![img](data:image/svg+xml;utf8,<?xml version="1.0"?>'),n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"800",height:"600"}}),s._v(")arguments")]),s._v(" "),n("p",[s._v("我们可以看到除了类数组的索引属性和length属性之外，还有一个callee属性，接下来我们一个一个介绍。")]),s._v(" "),n("h2",{attrs:{id:"length属性"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#length属性"}},[s._v("#")]),s._v(" length属性")]),s._v(" "),n("p",[s._v("Arguments对象的length属性，表示实参的长度，举个例子：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('function foo(b, c, d){\n    console.log("实参的长度为：" + arguments.length)\n}\n\nconsole.log("形参的长度为：" + foo.length)\n\nfoo(1)\n\n// 形参的长度为：3\n// 实参的长度为：1复制代码\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("h2",{attrs:{id:"callee属性"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#callee属性"}},[s._v("#")]),s._v(" callee属性")]),s._v(" "),n("p",[s._v("Arguments 对象的 callee 属性，通过它可以调用函数自身。")]),s._v(" "),n("p",[s._v("讲个闭包经典面试题使用 callee 的解决方法：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("var data = [];\n\nfor (var i = 0; i < 3; i++) {\n    (data[i] = function () {\n       console.log(arguments.callee.i) \n    }).i = i;\n}\n\ndata[0]();\ndata[1]();\ndata[2]();\n\n// 0\n// 1\n// 2复制代码\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("p",[s._v("接下来讲讲 arguments 对象的几个注意要点：")]),s._v(" "),n("h2",{attrs:{id:"arguments-和对应参数的绑定"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#arguments-和对应参数的绑定"}},[s._v("#")]),s._v(" arguments 和对应参数的绑定")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("function foo(name, age, sex, hobbit) {\n\n    console.log(name, arguments[0]); // name name\n\n    // 改变形参\n    name = 'new name';\n\n    console.log(name, arguments[0]); // new name new name\n\n    // 改变arguments\n    arguments[1] = 'new age';\n\n    console.log(age, arguments[1]); // new age new age\n\n    // 测试未传入的是否会绑定\n    console.log(sex); // undefined\n\n    sex = 'new sex';\n\n    console.log(sex, arguments[2]); // new sex undefined\n\n    arguments[3] = 'new hobbit';\n\n    console.log(hobbit, arguments[3]); // undefined new hobbit\n\n}\n\nfoo('name', 'age')复制代码\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br")])]),n("p",[s._v("传入的参数，实参和 arguments 的值会共享，当没有传入时，实参与 arguments 值不会共享")]),s._v(" "),n("p",[s._v("除此之外，以上是在非严格模式下，如果是在严格模式下，实参和 arguments 是不会共享的。")]),s._v(" "),n("h2",{attrs:{id:"传递参数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#传递参数"}},[s._v("#")]),s._v(" 传递参数")]),s._v(" "),n("p",[s._v("将参数从一个函数传递到另一个函数")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("// 使用 apply 将 foo 的参数传递给 bar\nfunction foo() {\n    bar.apply(this, arguments);\n}\nfunction bar(a, b, c) {\n   console.log(a, b, c);\n}\n\nfoo(1, 2, 3)复制代码\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("h2",{attrs:{id:"强大的es6"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#强大的es6"}},[s._v("#")]),s._v(" 强大的ES6")]),s._v(" "),n("p",[s._v("使用ES6的 ... 运算符，我们可以轻松转成数组。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("function func(...arguments) {\n    console.log(arguments); // [1, 2, 3]\n}\n\nfunc(1, 2, 3);复制代码\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h2",{attrs:{id:"应用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#应用"}},[s._v("#")]),s._v(" 应用")]),s._v(" "),n("p",[s._v("arguments的应用其实很多，在下个系列，也就是 JavaScript 专题系列中，我们会在 jQuery 的 extend 实现、函数柯里化、递归等场景看见 arguments 的身影。这篇文章就不具体展开了。")]),s._v(" "),n("p",[s._v("如果要总结这些场景的话，暂时能想到的包括：")]),s._v(" "),n("ol",[n("li",[s._v("参数不定长")]),s._v(" "),n("li",[s._v("函数柯里化")]),s._v(" "),n("li",[s._v("递归调用")]),s._v(" "),n("li",[s._v("函数重载\n...")])])])}),[],!1,null,null,null);a.default=t.exports}}]);